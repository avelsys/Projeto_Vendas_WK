unit Vendas.View.Frame.Base;

interface

uses
  Winapi.Windows,
  Winapi.Messages,
  System.SysUtils,
  System.Variants,
  System.Classes,
  System.Actions,
  Vcl.Graphics,
  Vcl.Controls,
  Vcl.Forms,
  Vcl.Dialogs,
  Vcl.StdCtrls,
  Vcl.ExtCtrls,
  Vcl.Grids,
  Vcl.DBGrids,
  Vcl.ActnList,
  Vcl.ComCtrls,
  Data.DB,
  Vendas.Model.BaseCadastro, Vendas.Controller.FrameBase,
  Vendas.Controller.Classes.BaseCadastroAtributo,
  Vendas.Dao.Conexao.Mysql,
  Vendas.Controller.Entidade.VendaItem;
type
  TRotinaExterna = procedure(Sender: TObject) of object;

  TframeBase = class(TFrame)
    pnlCenter: TPanel;
    pnlSide: TPanel;
    [TAcoesAtributes(taNovo)]
    btnNew: TButton;
    [TAcoesAtributes(taEditar)]
    btnEdit: TButton;
    [TAcoesAtributes(taExcluir)]
    btnDel: TButton;
    [TAcoesAtributes(taCancelar)]
    btnCan: TButton;
    [TAcoesAtributes(taGravar)]
    btnSaf: TButton;
    pgChildBase: TPageControl;
    [TOperacaoAtributes(csVizualizacao)]
    tbsChildListagem: TTabSheet;
    [TOperacaoAtributes(csEdicao)]
    tbsChildCadastro: TTabSheet;
    dbgFrame: TDBGrid;
  private
    FControllerFrame: iModelBaseCadastro;
    FRotinaExterna: TRotinaExterna;
    FGravarAutomatico: TRotinaGravaAutomatico;
    procedure ConfigurarTela;
  public
    constructor Create(AOwner: TComponent); override;

    property RotinaExterna: TRotinaExterna read FRotinaExterna write FRotinaExterna;
    property GravarAutomatico: TRotinaGravaAutomatico read FGravarAutomatico write FGravarAutomatico;
    property ControllerFrame: iModelBaseCadastro read FControllerFrame write FControllerFrame;
  end;

implementation

{$R *.dfm}

{ TframeBase }

constructor TframeBase.Create(AOwner: TComponent);
begin
  inherited;
  FControllerFrame:= TBaseFrameController.New(AOwner);
  ConfigurarTela;
end;

procedure TframeBase.ConfigurarTela;
begin
  for var Idx := 0 to Pred(pgChildBase.PageCount) do
    pgChildBase.Pages[Idx].TabVisible := False;

  FControllerFrame.IniciarAcao(taBrowse);
end;

end.
